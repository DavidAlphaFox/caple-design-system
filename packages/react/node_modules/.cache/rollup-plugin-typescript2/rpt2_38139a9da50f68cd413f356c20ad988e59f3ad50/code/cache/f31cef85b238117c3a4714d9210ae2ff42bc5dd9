{"code":"import React from 'react';\r\nimport classnames from 'classnames';\r\nimport ConfigContext from '../_config/ConfigContext';\r\nimport './Upload.style.scss';\r\nvar dragCounter = 0;\r\nexport default (function (_a) {\r\n    var _b;\r\n    var children = _a.children, name = _a.name, value = _a.value, accept = _a.accept, _c = _a.disabled, disabled = _c === void 0 ? false : _c, _d = _a.draggable, draggable = _d === void 0 ? false : _d, onChange = _a.onChange, _e = _a.className, className = _e === void 0 ? '' : _e, style = _a.style;\r\n    var useContext = React.useContext, useState = React.useState, useRef = React.useRef;\r\n    var prefix = useContext(ConfigContext).prefix;\r\n    var classPrefix = prefix + \"-upload\";\r\n    var classNames = classnames(classPrefix, className, (_b = {},\r\n        _b[classPrefix + \"--disabled\"] = disabled,\r\n        _b));\r\n    var _f = useState(false), dragging = _f[0], setDragging = _f[1];\r\n    var _g = useState(value), file = _g[0], setFile = _g[1];\r\n    var inputRef = useRef(null);\r\n    var onFileChange = function (event) {\r\n        var _a, _b;\r\n        var files = event.target.files;\r\n        var changedFile = (_a = files) === null || _a === void 0 ? void 0 : _a[0];\r\n        setFile(changedFile);\r\n        (_b = onChange) === null || _b === void 0 ? void 0 : _b(changedFile);\r\n    };\r\n    var onFileDrop = function (event) {\r\n        var _a, _b;\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        var files = event.dataTransfer.files;\r\n        var changedFile = (_a = files) === null || _a === void 0 ? void 0 : _a[0];\r\n        setFile(changedFile);\r\n        (_b = onChange) === null || _b === void 0 ? void 0 : _b(changedFile);\r\n        setDragging(false);\r\n    };\r\n    var onDragEnter = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        dragCounter += 1;\r\n        if (event.dataTransfer.items && event.dataTransfer.items.length > 0) {\r\n            setDragging(true);\r\n        }\r\n    };\r\n    var onDragLeave = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        dragCounter -= 1;\r\n        if (dragCounter === 0) {\r\n            setDragging(false);\r\n        }\r\n    };\r\n    var onDragOver = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    };\r\n    var onChooseFile = function () {\r\n        var _a;\r\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.click();\r\n    };\r\n    return (<div className={classNames} style={style} onClick={onChooseFile} onDrop={onFileDrop} onDragEnter={onDragEnter} onDragLeave={onDragLeave} onDragOver={onDragOver}>\n      <input ref={inputRef} type=\"file\" name={name} accept={accept} onChange={onFileChange}/>\n      {children(file, dragging)}\n    </div>);\r\n});\r\n","references":["/Users/kciter/Documents/cobalt/caple/caple-ui/packages/react/node_modules/@types/react/index.d.ts","/Users/kciter/Documents/cobalt/caple/caple-ui/node_modules/@types/classnames/index.d.ts","/Users/kciter/Documents/cobalt/caple/caple-ui/packages/react/src/components/_config/ConfigContext.ts"]}
